# Ruvve Tracker

#### Personal Mobility Navigation - Ruvve

<br />

ìµœê·¼ ë„ë¡œë‚˜ ì¸ë„ì— **ì „ë™ í‚¥ë³´ë“œ**ê°€ ë§ì´ ë³´ì´ê³  ìˆì§€ ì•Šë‚˜ìš”? <br/>
ë°°ë‹¬ë¡œ ì¸í•œ ì˜¤í† ë°”ì´ì˜ ìˆ˜ë„ ì ì  ì¦ê°€í•˜ê³  ìˆì–´ìš”.  <br/>
<br/>
ì´ë ‡ê²Œ **ê°œì¸í˜• ì´ë™ìˆ˜ë‹¨**ì˜ ê°œì²´ ìˆ˜ê°€ ì¦ê°€í•˜ë©´ì„œ ê·¸ì— ë”°ë¥¸ **ì‚¬ê±´/ì‚¬ê³ **ë“¤ë„ ê¸‰ê²©íˆ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br/>
RuvveëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê°œë°œëœ **ê°œì¸í˜• ì´ë™ìˆ˜ë‹¨ ì „ìš© ë„¤ë¹„ê²Œì´ì…˜**ì´ì—ìš”!<br/>
<br/>
Ruvveê°€ ê°€ì§„ ë‹¤ë¥¸ ë„¤ë¹„ê²Œì´ì…˜ ì„œë¹„ìŠ¤ì™€ì˜ ì°¨ë³„ì ì´ ë‘ ê°€ì§€ ìˆëŠ”ë°ìš”.<br/>
ë¨¼ì €, ë”¥ëŸ¬ë‹ì„ ê¸°ë°˜í•œ ê°œì²´ ì¶”ì ìœ¼ë¡œ ì£¼í–‰ ì¤‘ ì¥ì• ë¬¼ íƒì§€ë¥¼ í†µí•´ ì•Œë¦¼ì„ ì£¼ëŠ” ê¸°ëŠ¥ì„ ê°€ì§‘ë‹ˆë‹¤.<br/>
ë˜, AR ë·°ë¥¼ í†µí•´ í”íˆ ê¸¸ì¹˜ë¼ê³  ë¶€ë¥´ëŠ” ê³µê°„ê° ëŠ¥ë ¥ì´ ë¶€ì¡±í•œ ë¶„ë“¤ë„ ì§ê³¼ì ì¸ ë·°ë¥¼ í†µí•´ ì‰½ê²Œ ê¸¸ì°¾ê¸°ë¥¼ í•  ìˆ˜ ìˆì–´ìš”!<br/>
<br/>
 
 ê°œì¸í˜• ì´ë™ìˆ˜ë‹¨ì„ ìœ„í•œ ì „ìš© ê²½ë¡œë¥¼ ì°¾ì•„ ARí™”ë©´ì„ í†µí•œ ê¸¸ì•ˆë‚´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. MLì„ í†µí•œ ì‚¬ë¬¼ì¸ì‹ ê¸°ìˆ ì„ í†µí•´ ì£¼í–‰ ì¤‘ ì‚¬ê³  ìš”ì†Œë¥¼ ì‚¬ì „ ê°ì§€í•˜ê³  ì‚¬ê³ ë¥¼ ë¯¸ì—°ì— ë°©ì§€í•  ìˆ˜ ìˆëŠ” ì•ˆì „ ì„œë¹„ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì¥ì• ë¬¼ íƒì§€ ê¸°ëŠ¥ê³¼ AR Navigationì´ë¼ëŠ” íŠ¹ì§•ì´ ê¸°ì¡´ì˜ Navigationê³¼ì˜ ì°¨ë³„ì ì…ë‹ˆë‹¤.

<br/>

#### Why Ruvve? 
ìµœê·¼ ë‰´ìŠ¤ ë“±ì—ì„œ ì´ìŠˆê°€ ë˜ê³  ìˆëŠ” ì „ë™ í‚¥ë³´ë“œì˜ ìì „ê±° ë„ë¡œ ì£¼í–‰ ê´€ë ¨ ë²• ê°œì •ì— ì´ ì§€ì†ì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì „ë™ í‚¥ë³´ë“œë¥¼ ê·œì •ì— ë²—ì–´ë‚œ ì´ìš©í•˜ê³  ìˆëŠ” ì‚¬ìš©ìë“¤ë¡œ ì¸í•´ ë§ì€ ì‹œë¯¼ë“¤ì˜ ì•ˆì „ì— ìœ„í˜‘ì„ ì£¼ê³  ìˆê³  ìˆìœ¼ë©°, ì‚¬ìš©ì ë˜í•œ ë‹¤ì–‘í•œ ì•ˆì „ì‚¬ê³ ì— ë…¸ì¶œë˜ì–´ ìˆëŠ” ê²ƒì´ í˜„ì‹¤ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‚¬íšŒì  ë¬¸ì œí•´ê²°ì— AIì™€ IoT ê¸°ìˆ ì„ í†µí•´ ê¸°ì—¬ë¥¼ í•˜ê³ ì í•©ë‹ˆë‹¤.


ë” ìì„¸í•œ ì´ì•¼ê¸°ëŠ” ì•„ë˜ Notion ì— ì†Œê°œí•´ë‘ì—ˆìŠµë‹ˆë‹¤ ğŸ˜†<br/>
í”¼ë“œë°±ê³¼ ì§ˆë¬¸ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤! ğŸ‘‰ğŸ» ë…¸ì…˜ "Feedback & Comment" Sectionì— ë‹¬ì•„ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ ğŸ‘€ğŸ”¥

<br/>

<p align="center">
<table align="center"><tr><td>
 <a href="https://ruvve.notion.site/Ruvve-27b333f612814d07aaa2f6e8090c0e90"><img alt="notion" title="Notion" src="https://img.shields.io/badge/-Notion-white?style=for-the-badge&logo=notion&logoColor=black"/></a>
 </td></tr></table>
 </p>
 
 <br /> <br />
<!-- <p align="center">
<img alt="mockup" width="80%" src="https://user-images.githubusercontent.com/43839834/135746381-1c6d9f45-3247-4df0-99ad-e21819087553.png" />
</p> -->

<br/><br/>


### yolov4-deepsort

Object tracking implemented with YOLOv4, DeepSort, and TensorFlow. YOLOv4 is a state of the art algorithm that uses deep convolutional neural networks to perform object detections. We can take the output of YOLOv4 feed these object detections into Deep SORT (Simple Online and Realtime Tracking with a Deep Association Metric) in order to create a highly accurate object tracker.

<br/>

<p align="center">
<img alt="python-v3.7.0" src="https://img.shields.io/badge/python-v3.7.0-3f72af" />
<img alt="opencv-4.1.1.26" src="https://img.shields.io/badge/opencv-4.1.1.26-green.svg" />
<img alt="Yolo-v4" src="https://img.shields.io/badge/Yolo-v4-aa96da" />

<br/>
<a href="https://github.com/theAIGuysCode/yolov4-deepsort">
<img alt="Origin Repository" src="https://img.shields.io/badge/Origin Repository-grey" />
</a>
<img alt="license" src="https://img.shields.io/github/license/mashape/apistatus.svg" />
</p>
<br/>

<p align="center">
<img alt="mockup" width="60%" src="https://user-images.githubusercontent.com/43839834/135746103-41e41f40-0fbf-415e-9a11-2a5c8ea34cab.png" />
</p>

<br/><br/>

## Ruvve Architecture
<img alt="Service Architecture" width="100%" src="https://user-images.githubusercontent.com/43839834/135746113-b2428f0c-29fd-4e07-84cf-478fe017a845.png" />

<br/>

<p align="center">
<a href="https://github.com/Ruvve/ruvve-server"><img alt="Ruvve Server" title="Ruvve Server" src="https://img.shields.io/badge/-Ruvve Server-grey?style=for-the-badge&logo=github&logoColor=white"/></a>
<a href="https://github.com/Ruvve/ruvve-server"><img alt="Ruvve iOS" title="Ruvve iOS" src="https://img.shields.io/badge/-Ruvve iOS-grey?style=for-the-badge&logo=github&logoColor=white"/></a>
</p>


<br/><br/><br/><br/>

## Getting Started
To get started, install the proper dependencies either via Anaconda or Pip. I recommend Anaconda route for people using a GPU as it configures CUDA toolkit version for you.

### Conda (Recommended)

```bash
# Tensorflow CPU
conda env create -f conda-cpu.yml
conda activate yolov4-cpu

# Tensorflow GPU
conda env create -f conda-gpu.yml
conda activate yolov4-gpu
```

### Pip
(TensorFlow 2 packages require a pip version >19.0.)
```bash
# TensorFlow CPU
pip install -r requirements.txt

# TensorFlow GPU
pip install -r requirements-gpu.txt
```

<br/>

### Running the Tracker with YOLOv4
To implement the object tracking using YOLOv4, first we convert the .weights into the corresponding TensorFlow model which will be saved to a checkpoints folder. Then all we need to do is run the object_tracker.py script to run our object tracker with YOLOv4, DeepSort and TensorFlow.

```bash
# Convert darknet weights to tensorflow model
python save_model.py --model yolov4 

# Run yolov4 deep sort object tracker on video
python object_tracker.py --video ./data/video/test.mp4 --output ./outputs/demo.avi --model yolov4

# Run yolov4 deep sort object tracker on webcam (set video flag to 0)
python object_tracker.py --video 0 --output ./outputs/webcam.avi --model yolov4
```

<br/>

### Running the Tracker with YOLOv4-Tiny
The following commands will allow you to run yolov4-tiny model. Yolov4-tiny allows you to obtain a higher speed (FPS) for the tracker at a slight cost to accuracy. Make sure that you have downloaded the tiny weights file and added it to the 'data' folder in order for commands to work!
```
# save yolov4-tiny model
python save_model.py --weights ./data/yolov4-tiny.weights --output ./checkpoints/yolov4-tiny-416 --model yolov4 --tiny

# Run yolov4-tiny object tracker
python object_tracker.py --weights ./checkpoints/yolov4-tiny-416 --model yolov4 --video ./data/video/test.mp4 --output ./outputs/tiny.avi --tiny
```

<br/>

### Create Firebase Key File
Create a `firebase-key.json` file.

```json
{
  "API_KEY": "firebase-api-key",
  "TOKEN": "device-token"
}
```

<br/>

### Add Firebase Admin SDK File
Add a `firebase-adminsdk.json` file in the top folder.

<br/>

### Resulting

<p align="center" style="display: flex;align-items: center"> 
<img alt="result capture" width="45%" src="https://user-images.githubusercontent.com/43839834/136698482-e9e9e465-6f43-4449-8116-8d3fc277bb4c.png" />
<img alt="result capture" width="45%" src="https://user-images.githubusercontent.com/43839834/136698048-0cd18a7c-0245-4fc5-bc2c-c70d7723692a.jpg" />
</p>
<p align="center" style="display: flex;justify-content:center; align-items: center"> 
<img alt="result capture" width="20%" style="margin-right: 10px;" src="https://user-images.githubusercontent.com/43839834/136698106-66cb7b57-dc65-489c-9571-a33c98a1d7a5.PNG" />
<img alt="result capture" width="20%" src="https://user-images.githubusercontent.com/43839834/136698107-6fbe4e19-4b6e-424e-9586-b96b60a943ba.PNG" />
</p>


### References  

   Huge shoutout goes to hunglc007 and nwojke for creating the backbones of this repository:
  * [tensorflow-yolov4-tflite](https://github.com/hunglc007/tensorflow-yolov4-tflite)
  * [Deep SORT Repository](https://github.com/nwojke/deep_sort)
